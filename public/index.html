<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chat Interno</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div id="authGate" class="auth-gate" hidden>
      <div class="auth-card">
        <h2>Acesso</h2>
        <p class="muted">Entre com usu치rio e senha para acessar o sistema.</p>
        <form id="authForm" class="form">
          <label>
            Usu치rio
            <input type="text" id="authUser" placeholder="ex: admin" required />
          </label>
          <label>
            Senha
            <input type="password" id="authPass" placeholder="Sua senha" required />
          </label>
          <button type="submit">Entrar</button>
          <div class="auth-error" id="authError" hidden>Usu치rio ou senha inv치lidos.</div>
        </form>
      </div>
    </div>

    <div id="app" hidden>
      <header class="app-header">
        <h1>Chat Interno</h1>
        <div class="status" id="userStatus"></div>
        <button class="ghost logout-btn" hidden>Sair</button>
      </header>

      <section class="layout">
        <aside class="sidebar">
          <div class="card">
            <h2>Perfil</h2>
            <div class="profile" id="profileView" hidden>
              <div class="profile-header">
                <div class="profile-avatar" id="profileAvatarWrap">
                  <img id="profileAvatar" alt="Foto do perfil" hidden />
                  <span id="profileAvatarFallback">A</span>
                </div>
                <div>
                  <p><strong id="profileName"></strong></p>
                  <p class="muted" id="profileEmail"></p>
                  <span class="status-badge" id="profileStatusBadge">Online</span>
                </div>
              </div>

              <label class="inline-field">
                Alterar foto
                <input type="file" id="avatarInput" accept="image/*" />
              </label>

              <label class="inline-field">
                Status
                <select id="statusSelect">
                  <option value="online">Online</option>
                  <option value="ausente">Ausente</option>
                  <option value="offline">Offline</option>
                </select>
              </label>

              <div class="inline-field">
                Tema
                <div class="theme-toggle" role="group" aria-label="Tema">
                  <button type="button" class="theme-btn" data-theme="blue">Azul</button>
                  <button type="button" class="theme-btn" data-theme="light">Branco</button>
                </div>
              </div>
              <button class="ghost logout-btn">Sair</button>
            </div>
          </div>

          <div class="card">
            <h2>Salas</h2>
            <div class="rooms" id="roomsList"></div>
            <form id="roomForm" class="form">
              <label>
                Nova sala
                <input type="text" id="roomInput" placeholder="ex: financeiro" />
              </label>
              <button type="submit">Criar</button>
            </form>
          </div>

          <div class="card" id="adminPanel" hidden>
            <h2>Administra칞칚o</h2>
            <form id="userForm" class="form">
              <label>
                Nome
                <input type="text" id="newUserName" placeholder="Nome completo" required />
              </label>
              <label>
                E-mail
                <input type="email" id="newUserEmail" placeholder="email@empresa.com" required />
              </label>
              <label>
                Usu치rio
                <input type="text" id="newUserUsername" placeholder="usuario" required />
              </label>
              <label>
                Senha
                <input type="password" id="newUserPassword" placeholder="senha" required />
              </label>
              <label>
                Perfil
                <select id="newUserRole">
                  <option value="user">Usu치rio</option>
                  <option value="admin">Administrador</option>
                </select>
              </label>
              <button type="submit">Adicionar usu치rio</button>
            </form>
            <div class="users-list" id="usersList"></div>
          </div>
        </aside>

        <main class="chat">
          <div class="chat-header">
            <div>
              <h2 id="roomTitle">Selecione uma sala</h2>
              <p class="muted" id="roomSubtitle">Hist칩rico das 칰ltimas mensagens</p>
            </div>
          </div>

          <div class="chat-body" id="messages"></div>

          <form id="messageForm" class="chat-input">
            <button type="button" id="togglePickerBtn" class="tool-btn" aria-label="Abrir emojis, GIFs e stickers">游땕</button>
            <input
              type="text"
              id="messageInput"
              placeholder="Digite sua mensagem..."
              autocomplete="off"
              disabled
            />
            <button type="submit" disabled>Enviar</button>
          </form>
          <div class="message-tools" id="messageTools" aria-label="Op칞칫es da mensagem" hidden>
            <div class="picker-header">
              <input type="text" id="pickerSearch" placeholder="Buscar emojis, GIFs e stickers" />
            </div>
            <div class="picker-tabs">
              <button type="button" class="picker-tab active" data-tab="emoji">Emojis</button>
              <button type="button" class="picker-tab" data-tab="gif">GIFs</button>
              <button type="button" class="picker-tab" data-tab="sticker">Stickers</button>
            </div>
            <div class="picker-grid" id="pickerGrid"></div>
            <div class="gif-url" id="gifUrlRow" hidden>
              <input type="url" id="gifInput" placeholder="Cole a URL do GIF" />
              <button type="button" id="gifSendBtn">Enviar</button>
              <button type="button" id="gifClearBtn" class="ghost">Limpar</button>
            </div>
          </div>
        </main>
      </section>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="/firebase-config.js?v=20260203-6"></script>
    <script src="/app.js?v=20260203-6"></script>
  </body>
</html>
