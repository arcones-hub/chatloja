(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0dac27b5"],{"3ec9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",[a("ModalCancelPurchase"),e.titleIsLoaded?a("Title",{attrs:{title:"Compras",hasPrint:!0,hasNewRegister:!0,routeNewRegister:e.handleNavigationRegister,newRegisterButtonName:"Nova Compra",disableNewButton:e.issuerBasicData.isEmpty,reasonsToDisableNewButton:e.issuerBasicData.requiredData}}):e._e(),e.nfePending.length?a("div",{staticClass:"alert alert-info mb-5 position-relative"},[a("span",{staticClass:"me-3 ms-3"},[e._v("As notas abaixo apresentam inconsistências. Para corrigir, "),a("b",[e._v("exclua e registre novamente cada uma delas")]),e._v(":")]),a("ul",{staticStyle:{"margin-bottom":"0!important"}},e._l(e.nfePending,(function(t,n){return a("li",{key:n},[e._v("Número: "+e._s(t.nfeNumber))])})),0)]):e._e(),a("Table",{key:e.tableKey,staticClass:"table-hover",attrs:{tableData:e.tableData,items:e.summaryPurchases,pagination:!0,perPage:e.paginationPurchase.perPage,startItem:e.paginationPurchase.startItem,endItem:e.paginationPurchase.endItem,totalItems:e.paginationPurchase.totalItems,page:e.paginationPurchase.currentPage,onClickRow:e.handleNavigationEdit,onSearch:e.search},on:{changeItemsPerPage:e.handleChangeItemsPerPage,changePage:e.handleChangePage}})],1)},r=[],s=(a("a4d3"),a("e01a"),a("d3b7"),a("ac1f"),a("3ca3"),a("841c"),a("ddb0"),a("5530")),c=(a("96cf"),a("1da1")),i=a("2af9"),u=a("2f62"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{value:e.modalCancelPurchaseIsOpen,onClose:e.toggleModalCancelPurchase,size:"tiny"}},[a("b-row",{attrs:{align:"center"}},[a("b-col",[a("AlertCircleOutline",{staticClass:"icon-2x",attrs:{title:"Alerta"}})],1)],1),a("b-row",{staticClass:"mt-2 mb-3",attrs:{align:"center"}},[a("b-col",[a("h2",[e._v("Tem certeza que deseja excluir?")])])],1),a("b-row",{attrs:{align:"center"}},[a("b-col",[a("Button",{attrs:{type:"cancel"},on:{click:function(t){return e.toggleModalCancelPurchase()}}},[a("Close",{staticClass:"mb-1",attrs:{title:"Cancelar"}}),e._v(" Cancelar ")],1),a("Button",{attrs:{type:"success"},on:{click:function(t){return e.handleCancel()}}},[e._v("Confirmar")])],1)],1)],1)},l=[],h=a("2127"),d=a("7eb5"),m=a("6f7c"),g={name:"modalCancelPurchase",components:{Modal:i["u"],Button:h["a"],Close:d["a"],AlertCircleOutline:m["a"]},computed:Object(s["a"])(Object(s["a"])({},Object(u["d"])("purchase",["paginationPurchase"])),Object(u["d"])("componentsPurchase",["modalCancelPurchaseIsOpen","modalCancelPurchaseIds"])),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(u["b"])("purchase",["deletePurchase","setSummaryPurchases"])),Object(u["b"])("application",["setLoading"])),Object(u["b"])("componentsPurchase",["toggleModalCancelPurchase"])),{},{handleCancel:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.next=3,e.deletePurchase(e.modalCancelPurchaseIds);case 3:return t.next=5,e.setSummaryPurchases({search:null,pagination:Object(s["a"])(Object(s["a"])({},e.paginationPurchase),{},{currentPage:1})});case 5:e.setLoading(!1),e.toggleModalCancelPurchase();case 7:case"end":return t.stop()}}),t)})))()}})},b=g,p=(a("a098"),a("2877")),P=Object(p["a"])(b,o,l,!1,null,"1623c69f",null),f=P.exports,O={name:"purchase",components:{Layout:i["s"],Title:i["R"],Table:i["O"],ModalCancelPurchase:f},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.emptyIssuerBasicData(),e.resetPurchase(),e.setPurchase()]);case 2:return t.prev=2,t.next=5,e.setLoading(!0);case 5:return t.next=7,e.setSummaryPurchases({search:null,pagination:e.paginationPurchase});case 7:return t.next=9,e.findPendingPurchases();case 9:return e.nfePending=t.sent,t.next=12,e.setLoading(!1);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](2),e.setLoading(!1);case 17:e.titleIsLoaded=!0;case 18:case"end":return t.stop()}}),t,null,[[2,14]])})))()},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(u["d"])("purchase",["summaryPurchases","paginationPurchase"])),Object(u["d"])("componentsPurchase",["modalCancelPurchaseIsOpen"])),Object(u["d"])("client",["client"])),{},{optionsStatus:function(){return[{value:"todos",text:"Todos"}]},tableData:function(){var e=this,t=i["P"].Data,a=i["P"].TABLE_CELL_ALIGN,n=new t({select:!0,panelActions:!0,advancedFilters:!0,onSearch:this.search,titleMobile:function(e){return e.description}});return n.addField({key:"entryDate",label:"Data",sortable:!0,align:a.center,formatter:function(t){return e.$moment(t).format("DD/MM/YYYY")},width:100}).addField({key:"nfeNumber",label:"Número",sortable:!0,align:a.center}).addField({key:"supplier",label:"Fornecedor",sortable:!0,width:600,align:a.left}).addField({key:"vNF",label:"Total R$",sortable:!0,width:150,formatter:function(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)},align:a.right}).addActions(Object(i["b"])("cancel",(function(t){return e.cancel(t)}))),n}}),data:function(){return{nfePending:[],titleIsLoaded:!1,issuerBasicData:{isEmpty:!1,requiredData:["Endereço","CPF/CNPJ"]},tableKey:0,form:{date:this.$moment(this.$moment().format("YYYY-MM-01")).toDate(),search:"",status:"todos"}}},methods:Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(u["b"])("purchase",["resetPurchase","searchPurchases","setPurchase","setSummaryPurchases","setDetailedPurchase","findPendingPurchases"])),Object(u["b"])("application",["setLoading"])),Object(u["b"])("client",["setClient"])),Object(u["b"])("componentsPurchase",["toggleModalCancelPurchase","setModalCancelPurchaseIds"])),{},{emptyIssuerBasicData:function(){this.client.addressCollection.length&&this.client.identification||(this.issuerBasicData.isEmpty=!0)},search:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.setLoading(!0);case 2:return a.next=4,t.setSummaryPurchases({search:e,pagination:Object(s["a"])(Object(s["a"])({},t.paginationPurchase),{},{currentPage:1})});case 4:return a.next=6,t.setLoading(!1);case 6:case"end":return a.stop()}}),a)})))()},handleChangeItemsPerPage:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=Object(s["a"])(Object(s["a"])({},t.paginationPurchase),{},{perPage:e,currentPage:1}),a.next=3,t.setLoading(!0);case 3:return a.next=5,t.setSummaryPurchases({search:null,pagination:n});case 5:return a.next=7,t.setLoading(!1);case 7:case"end":return a.stop()}}),a)})))()},handleChangePage:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=Object(s["a"])(Object(s["a"])({},t.paginationPurchase),{},{currentPage:e}),a.next=3,t.setLoading(!0);case 3:return a.next=5,t.setSummaryPurchases({search:null,pagination:n});case 5:return a.next=7,t.setLoading(!1);case 7:case"end":return a.stop()}}),a)})))()},handleNavigationEdit:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.id){a.next=2;break}return a.abrupt("return",null);case 2:return a.abrupt("return",t.$router.push({name:"PurchaseEdit",params:{id:e.id}}));case 3:case"end":return a.stop()}}),a)})))()},handleNavigationRegister:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.$router.push({name:"PurchaseRegister"}));case 1:case"end":return t.stop()}}),t)})))()},cancel:function(e){this.setModalCancelPurchaseIds(e),this.toggleModalCancelPurchase()}}),watch:{modalCancelPurchaseIsOpen:function(){this.modalCancelPurchaseIsOpen||(this.tableKey+=1)}}},j=O,C=Object(p["a"])(j,n,r,!1,null,null,null);t["default"]=C.exports},a098:function(e,t,a){"use strict";a("c7f4")},c7f4:function(e,t,a){}}]);
//# sourceMappingURL=chunk-0dac27b5.e0fdddbd.js.map